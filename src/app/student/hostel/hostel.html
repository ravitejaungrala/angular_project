<div *ngIf="student">
  <h2>Hostel Fees</h2>
  
  <div *ngIf="student.hostel?.allocated; else notAllocated">
    <div class="hostel-info">
      <p><strong>Room:</strong> {{ student.hostel?.block }}-{{ student.hostel?.roomNo }}</p>
      <p><strong>Hostel Fee Due:</strong> ₹{{ student.hostel?.fees.amount }}</p>
      <p><strong>Payment Status:</strong> 
        <span [class.text-success]="student.hostel?.fees.paid" 
              [class.text-danger]="!student.hostel?.fees.paid">
          {{ student.hostel?.fees.paid ? 'Paid' : 'Due' }}
        </span>
      </p>
    </div>

    <div *ngIf="!student.hostel?.fees.paid" class="payment-form">
      <div class="form-group">
        <label>Amount to Pay</label>
        <input type="number" [(ngModel)]="paymentAmount" 
               [max]="student.hostel?.fees.amount"
               min="1" placeholder="Enter amount">
      </div>
      <button (click)="payHostelFees()" 
              [disabled]="!paymentAmount || paymentAmount <= 0">
        Pay Hostel Fees
      </button>
    </div>

    <div *ngIf="paymentDone" class="alert alert-success">
      <p>Payment of ₹{{ lastPaymentAmount }} successful!</p>
      <p *ngIf="student.hostel?.fees.amount > 0">
        Remaining hostel fees: ₹{{ student.hostel?.fees.amount }}
      </p>
      <p *ngIf="student.hostel?.fees.paid">
        Your hostel fees are fully paid!
      </p>
    </div>
  </div>

  <ng-template #notAllocated>
    <div class="alert alert-info">
      You are not currently allocated to any hostel.
    </div>
  </ng-template>
</div>