<div class="container mt-4">
  <h2>Student Dashboard</h2>
  <p>
    Welcome, {{ student.name }} ({{ student.department }} - Year {{ student.year }})
  </p>

  <div class="row mt-4">
    <!-- Courses Card -->
    <div class="col-md-4">
      <div class="card text-white bg-primary mb-3">
        <div class="card-body">
          <h5 class="card-title">Courses</h5>
          <p class="card-text display-4">{{ student.courses.length }}</p>
        </div>
      </div>
    </div>

    <!-- Average Marks Card -->
    <div class="col-md-4">
      <div class="card text-white bg-success mb-3">
        <div class="card-body">
          <h5 class="card-title">Average Marks</h5>
          <p class="card-text display-4">{{ averageMarks | number: '1.0-0' }}%</p>
        </div>
      </div>
    </div>

    <!-- Fees Status Card -->
    <div class="col-md-4">
      <div class="card text-white bg-info mb-3">
        <div class="card-body">
          <h5 class="card-title">Fees Status</h5>
          <p class="card-text display-4">
            <span [ngClass]="student.fees.paid ? 'text-success' : 'text-danger'">
              {{ student.fees.paid ? 'Paid' : 'Due' }}
            </span>
          </p>
        </div>
      </div>
    </div>
  </div>

  <!-- Fee Summary Section -->
   <div class="card mt-4">
    <div class="card-header bg-dark text-white">Fee Summary</div>
    <div class="card-body">
      <div class="row">
        <!-- College Fees Summary -->
        <div class="col-md-6">
          <h5>College Fees</h5>
          <div class="fee-row">
            <span class="fee-label">Total Fee:</span>
            <span class="fee-value">₹{{ totalCollegeFee }}</span>
          </div>
          <div class="fee-row">
            <span class="fee-label">Amount Paid:</span>
            <span class="fee-value paid">₹{{ collegeAmountPaid }}</span>
          </div>
          <div class="fee-row">
            <span class="fee-label">Amount Due:</span>
            <span class="fee-value due">₹{{ collegeAmountDue }}</span>
          </div>
        </div>

        <!-- Hostel Fees Summary -->
        <div class="col-md-6" *ngIf="student?.hostel?.allocated">
          <h5>Hostel Fees</h5>
          <div class="fee-row">
            <span class="fee-label">Total Fee:</span>
            <span class="fee-value">₹{{ totalHostelFee }}</span>
          </div>
          <div class="fee-row">
            <span class="fee-label">Amount Paid:</span>
            <span class="fee-value paid">₹{{ hostelAmountPaid }}</span>
          </div>
          <div class="fee-row">
            <span class="fee-label">Amount Due:</span>
            <span class="fee-value due">₹{{ hostelAmountDue }}</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- College and Hostel Fees Cards -->
  <div class="row mt-4">
    <div class="col-md-6">
      <div class="card">
        <div class="card-header bg-primary text-white">
          College Fees
        </div>
        <div class="card-body">
          <p><strong>Status:</strong> {{ collegeFeeStatus }}</p>
          <a routerLink="/student/fees" class="btn btn-sm btn-outline-primary" 
             *ngIf="!collegeFeePaid">
            Pay College Fees
          </a>
        </div>
      </div>
    </div>

    <div class="col-md-6">
      <div class="card">
        <div class="card-header bg-info text-white">
          Hostel Fees
        </div>
        <div class="card-body">
          <p><strong>Status:</strong> {{ hostelFeeStatus }}</p>
          <a routerLink="/student/hostel" class="btn btn-sm btn-outline-info"
             *ngIf="student?.hostel?.allocated && !hostelFeePaid">
            Pay Hostel Fees
          </a>
          <p *ngIf="!student?.hostel?.allocated">Not allocated to hostel</p>
        </div>
      </div>
    </div>
  </div>

  <div class="row mt-4">
    <!-- Quick Links -->
    <div class="col-md-4">
      <div class="card">
        <div class="card-header bg-dark text-white">Quick Links</div>
        <div class="list-group list-group-flush">
          <a routerLink="/student/courses" class="list-group-item list-group-item-action">My Courses</a>
          <a routerLink="/student/marks" class="list-group-item list-group-item-action">My Marks</a>
          <a routerLink="/student/fees" class="list-group-item list-group-item-action">Fee Details</a>
          <a routerLink="/student/hostel" class="list-group-item list-group-item-action">Hostel Details</a>
        </div>
      </div>
    </div>

    <!-- Recent Activities -->
    <div class="col-md-8">
      <div class="card">
        <div class="card-header bg-dark text-white">Recent Activities</div>
        <div class="card-body">
          <p>You are enrolled in {{ student.courses.length }} courses this semester.</p>
          <p *ngIf="student?.hostel">
            Your hostel room: {{ student.hostel?.block }} - {{ student.hostel?.roomNo }}<br>
            Hostel fees: {{ student.hostel.fees.paid ? 'Paid' : 'Due (₹' + student.hostel.fees.amount + ')' }}
          </p>
          <p>
            College fees: {{ student.fees.paid ? 'Paid' : 'Due (₹' + student.fees.amount + ')' }}
          </p>
          <p *ngIf="lastPayment">
            Last payment: ₹{{ lastPayment.amount }} on {{ lastPayment.date | date }}
          </p>
        </div>
      </div>
    </div>
  </div>
</div>